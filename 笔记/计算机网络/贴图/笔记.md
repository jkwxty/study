# 计算机网络基础篇

## OSI标准模型

应用层，表示层，会话层，传输层，网络层，数据链路层，物理层



## 原理体系结构

应用层，运输层，网络层，数据链路层，物理层



### 原理体系结构剖析

#### 应用层

##### 描述

在计算机网络体系中处于最上层，我们手机或电脑使用的应用软件都在应用层实现，应用层只关注于为用户提供应用功能（体现了设计模式中的-单一职责原则SRP）,应用层是工作在操作系统中的用户态，传输层以及一下是工作在内核态

#### 传输层

##### 描述

传输层是为应用层提供网络支持的。

传输层有两个协议，分别为**TCP**和**UDP**。

##### TCP

全称:传输层控制协议，可靠，大部分应用使用的就是TCP传输层协议，比如HTTP应用层协议使用的就是TCP传输层协议。

##### UDP

不可靠，传输效率高。

##### 传输层数据分段

应用如果传输的数据非常大。如果直接传输，会不好控制，当传输层接收到应用层的数据超过**MSS**（TCP最大报文长度）时，传输层会将数据进行分段，他的作用是：在传输途中如果有一段数据包丢了，只需要重传这一个分段，而不是将整个数据包重传。这样一个数据包段称为**TCP段**

##### 端口

为什么会有端口概念？

当设备作为接收方时，传输层要将数据包传输给这台设备的某个应用，但是一个设备是很可能会有多个应用的，这些应用都会接收或者传输数据，我们要将设备中的这些应用区分开来，将数据包发送到一个指定应用，就需要用**端口**进行应用间的区分。

#### 网络层

###### 描述

网络层是的主要任务是实现网络之间的互联，进而实现数据包在各个网络之间的传输，但是她并不负责数据的传输任务（并不违背设计原则）

###### IP协议

![8c5dc0d0-e084-4728-95ea-d6d23ceb2586](file:///C:/Users/Administrator/Pictures/Typedown/8c5dc0d0-e084-4728-95ea-d6d23ceb2586.png)

网络层最常用的就是IP协议，IP协议会将传输层的数据包作为IP协议的数据部分，再加上IP包头组成**IP报文**（类似于设计模式中的**装饰模式**，将传输层的数据包进行装饰后再传递给下一层）。

IP报文的大小超过限制也会进行分段（二次分段，传输层进行第一次分段），IP报文长度超过了MTU（以太网中一般为1500字节）时会触发分段

##### 寻址和路由

我们一般用IP地址给设备进行编号，对于IPV4协议，IP地址共32位，分成4段，每段8位。但是，只有一个IP地址，虽做到了设备区分，但是设备量太大，寻址起来太麻烦，因此需要将IP地址分为两种含义:网络号和主机号。

###### 网络号

负责标识该IP是属于那个子网的

###### 主机号

负责标识同一子网下的不同主机

配合**子网掩码**计算出IP地址的网络号和主机号，在寻址过程中，先匹配到对应的网络号再匹配到对应网络号下的主机。除了寻址能力，IP协议还有一个重要的能力就是**路由**。IP协议的**寻址**是告诉我们去下一个目的地该怎么走，**路由**则是根据【下一个目的地】选择路径，寻址是导航，路由是操作的方向盘。










