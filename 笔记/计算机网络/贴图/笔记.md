# 计算机网络基础篇

## OSI标准模型

应用层，表示层，会话层，传输层，网络层，数据链路层，物理层



## 原理体系结构

应用层，运输层，网络层，数据链路层，物理层



### 原理体系结构剖析

#### 应用层

##### 描述

在计算机网络体系中处于最上层，我们手机或电脑使用的应用软件都在应用层实现，应用层只关注于为用户提供应用功能（体现了设计模式中的-单一职责原则SRP）,应用层是工作在操作系统中的用户态，传输层以及一下是工作在内核态

#### 传输层

##### 描述

传输层是为应用层提供网络支持的。

传输层有两个协议，分别为**TCP**和**UDP**。

##### TCP

全称:传输层控制协议，可靠，大部分应用使用的就是TCP传输层协议，比如HTTP应用层协议使用的就是TCP传输层协议。

##### UDP

不可靠，传输效率高。

##### 传输层数据分段

应用如果传输的数据非常大。如果直接传输，会不好控制，当传输层接收到应用层的数据超过**MSS**（TCP最大报文长度）时，传输层会将数据进行分段，他的作用是：在传输途中如果有一段数据包丢了，只需要重传这一个分段，而不是将整个数据包重传。这样一个数据包段称为**TCP段**

##### 端口

为什么会有端口概念？

当设备作为接收方时，传输层要将数据包传输给这台设备的某个应用，但是一个设备是很可能会有多个应用的，这些应用都会接收或者传输数据，我们要将设备中的这些应用区分开来，将数据包发送到一个指定应用，就需要用**端口**进行应用间的区分。

#### 网络层

###### 描述

网络层是的主要任务是实现网络之间的互联，进而实现数据包在各个网络之间的传输，但是她并不负责数据的传输任务（并不违背设计原则）

###### IP协议

![8c5dc0d0-e084-4728-95ea-d6d23ceb2586](file:///C:/Users/Administrator/Pictures/Typedown/8c5dc0d0-e084-4728-95ea-d6d23ceb2586.png)

网络层最常用的就是IP协议，IP协议会将传输层的数据包作为IP协议的数据部分，再加上IP包头组成**IP报文**（类似于设计模式中的**装饰模式**，将传输层的数据包进行装饰后再传递给下一层）。

IP报文的大小超过限制也会进行分段（二次分段，传输层进行第一次分段），IP报文长度超过了MTU（以太网中一般为1500字节）时会触发分段

##### 寻址和路由

我们一般用IP地址给设备进行编号，对于IPV4协议，IP地址共32位，分成4段，每段8位。但是，只有一个IP地址，虽做到了设备区分，但是设备量太大，寻址起来太麻烦，因此需要将IP地址分为两种含义:网络号和主机号。

###### 网络号

负责标识该IP是属于那个子网的

###### 主机号

负责标识同一子网下的不同主机

配合**子网掩码**计算出IP地址的网络号和主机号，在寻址过程中，先匹配到对应的网络号再匹配到对应网络号下的主机。除了寻址能力，IP协议还有一个重要的能力就是**路由**。IP协议的**寻址**是告诉我们去下一个目的地该怎么走，**路由**则是根据【下一个目的地】选择路径，寻址是导航，路由是操作的方向盘。



#### 数据链路层

一个用于标识网络中的设备，让数据在一个链路中传输的层级，就是**数据链路层**，它主要是为网络层提供链路级别传输的服务。

 每一台设备的网卡都会有一个**MAC地址**,它就是用来唯一标识设备的。路由器计算出了下一个目的的IP地址，再通过ARP协议找到该目的MAC地址，这样就知道这个IP地址是那个设备的了。

链路：从一个节点到另一个节点的一段物理线路，并且中间不存在任何的其他节点

数据链路：把实现通信协议的硬件和软件加到链路上，就构成了数据链路。数据链路层以帧为单位传输和处理数据

#### 物理层

数据准备从设备发送到网络时，需要把数据包转换成电信号，让其可以在物理媒介中传输，这一层就是**物理层**，它主要是为**数据链路层**提供二进制传输服务。

物理层主要考虑的是怎样在连接各种计算机的传输媒体上传输数据比特流、



## 计算器网络之HTTP

我们在浏览器输入网址后可以访问网站内容，这就是**万维网WWW应用**，其相关的应用层协议为**超文本传输协议HTTP** -- **应用层协议**

### HTTP基本概念

http是超文本传输协议，英文全称：**H**yper**T**ext **T**ransfer **P**rotocal



- 超文本 -- 超越了普通文本的本本，文字，图片，视频。

- 传输 -- http是一个两点之间传输数据的双向协议。

- 协议 -- 两个以上参与者的行为约定和规范。

**HTTP是一个在计算机世界里专门在 【两点】之间 【传输】文字，图片，音频，视频等【超文本】 数据的【约定和规范】**



### HTTP请求响应过程（待补充，后面按自己理解更详细补充）



### HTTP请求特征

简单，灵活，易于扩展，应用广泛，跨平台。

### 持久性连接，非持久性连接

HTTP1.0:  非持久性连接，每次http的请求响应过程，都需要建立一个新的TCP连接。

HTTP1.1：持久性连接。

#### 非持久性的缺点

1. 必须为每个http请求的对象建立和维护一个全新的连接。

2. 对于每个连接，在客户端和服务端都需要为TCP分配一个缓冲区和保持TCP变量，这会给web服务器带来巨大压力，每一台服务器服务会同时维护数百上千的请求。

#### 持久性连接的特点

只要任意一端没有提出断开连接，则会保持TCP连接状态。



### HTTP报文格式

##### 组成部分

- 起始行

- 头部字段

- 消息正文 -- 使用GET方法是没有消息正 文的，POST方法才会有实体



## 计算机网络之TCP

### 什么是TCP

- ###### 面向连接：TCP只能一对一连接，不能一对多（UDP才能一对多）

- ###### 可靠的:  TCP能保证发送端的每一个报文都能到达接收端

- ###### 字节流: 消息是没有边界的，无论多大都可以进行传输。消息也是【有序】的，当发送端的前一个消息在接收端还没收到时，即使它已经收到了后面的消息，接收端也还不能吧这个报文数据交给应用处理，接收端会先对数据进行去重，并且保证数据有序性和完整性。




